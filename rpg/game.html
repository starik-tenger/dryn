<!doctype html>
<html>
<style>
   * {
    margin: 0;
    padding: 0;
   }
 </style>
<canvas height=900 width=900 id="screen"></canvas>
<script>
	window.addEventListener('keydown',this.check,false);
	window.addEventListener('keyup',this.reset,false);
	
	var screen = document.getElementById("screen");
	ctx     = screen.getContext('2d');
    ctx.imageSmoothingEnabled = false;
	
	function randomInterval(max, min)
	{
		return Math.round(Math.random() * (max - min) + min);
	}
	
	var size = 100;
	var blockSize = 10;
	
	var blocks = [];
	for(x=0;x<size;x++)
	{
		blocks.push([]);
		for(y=0;y<size;y++)
		{
			blocks[x].push({type: 0, neighbours: 0});
		}
	}
	
	function cycle()
	{
		var neighbors;
		for(x=1;x<size-1;x++)
		{
			for(y=1;y<size-1;y++)
			{
				neighbors = blocks[x][y].neighbours;
				if(blocks[x-1][y]==1){neighbors++;}
				if(blocks[x-1][y-1]==1){neighbors++;}
				if(blocks[x-1][y+1]==1){neighbors++;}
				if(blocks[x][y+1]==1){neighbors++;}
				if(blocks[x][y-1]==1){neighbors++;}
				if(blocks[x+1][y-1]==1){neighbors++;}
				if(blocks[x+1][y+1]==1){neighbors++;}
				if(blocks[x+1][y]==1){neighbors++;}
				
			}
		}
		
		for(i=0;i<1;i++)
		{
			for(x=1;x<size-1;x++)
			{
				for(y=1;y<size-1;y++)
				{
					var neighbours = blocks[x][y].neighbours;
					
					if(randomInterval(1,neighbors)==1 && neighbors>0)
					{
						blocks[x][y] = 1;
					}
				}
			}
		}
	}
	
	function generateWorld(a)
	{
		for(var i=0;i<1;i++)
		{
			for(x=1;x<size-1;x++)
			{
				for(y=1;y<size-1;y++)
				{
					var neighbours = blocks[x][y].neighbours;
					
					if(randomInterval(0,16)==0)
					{
						blocks[x][y] = 1;
					}
				}
			}
		}
		for(var i=0;i<a;i++)
		{
			cycle();
		}
	}
	
	function draw()
	{
		for(x=0;x<size;x++)
		{
			for(y=0;y<size;y++)
			{
				if(blocks[x][y]==1)
				{
					ctx.fillRect(x*blockSize,y*blockSize,blockSize,blockSize);
				}
			}
		}
	}
	generateWorld(50);
	draw();
	
</script>